HttpClient と Jetty 。こいつらと戦う、TDDで。数ヶ月前にもこいつらとは戦った気がするのだけれど、HttpClient はインタフェースがひどい。中途半端に抽象化されているもんだから使いにくいことこのうえない。使いやすさと、サードパーティーライブラリをラップするためにライブラリを書く。

サーバーには Jetty を使う。Jetty は HttpClient と比べるとよくできている感じがする。Get/Postとそのパラメーターなどを検証できるようにして、テストしつつ、ライブラリをリファクタリングしていく。良い感じ。

時間はそこそこかかったけど、TDD の練習も兼ねているからこんなものだろう。実践テスト駆動開発(GOOS)を読んでいて、外部サービスに対しても代替オブジェクトを用意しているのを見て、サーバーをモックとして使いたくなった。それだけ。

明日はこのライブラリを使ってごにょごにょ。とっとと Android ( UI ) に入れるようにしたい。

3 min.
