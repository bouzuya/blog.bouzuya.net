[bouzuya/tsukota-web] を進めている。デプロイに向けて `Dockerfile` を追加している。実際に動かしてみると、開発環境だけを想定した構成になっていて、動かないことに気づく。

具体的には次のようなものがあった。

- `PORT` を指定しても `:3000` で起動する
- サービスアカウントのメールアドレスが `FIXME@example.com` でハードコードされている
- フロントエンドのファイルを配信する仕組みがない
- バックエンドが `http://localhost:3000` に固定されている

おそらく、次はデプロイしてみて、動かないが出る。ロギングも機能していないし JWT の扱いが特に怪しそうだと思っている。忘れちゃいけないのは、既存のデータベースと DateTime の形式が異なっていて、混在させるとまずいということ。あと 3 日か。間に合うかな……。

---

今日のコミット。

- [tsukota-web](https://github.com/bouzuya/tsukota-web) 12 commits
  - [Add frontend/.env](https://github.com/bouzuya/tsukota-web/commit/4f56150e467333ade9339c60e8f269c268826c57)
  - [Extract env vars](https://github.com/bouzuya/tsukota-web/commit/17844038746091eb0d1cf3597b8277e25db31170)
  - [Remove vite.svg](https://github.com/bouzuya/tsukota-web/commit/e3f34dc457cfc3d828572a63e04e902155bfea76)
  - [Add dockerfile](https://github.com/bouzuya/tsukota-web/commit/786515bd271774d81537f4bee398d7f3847d3ca3)
  - [Fix to use PORT env](https://github.com/bouzuya/tsukota-web/commit/0e9a9bf7f7c775e54e7ada8785debba96ffae75c)
  - [Fix to use IamSessionTokenVerifier](https://github.com/bouzuya/tsukota-web/commit/bd13513c70e6478b65976990857018d69fa5afbc)
  - [Add PUBLIC_DIR support](https://github.com/bouzuya/tsukota-web/commit/38428eb075cb893598b722cb51157fddb278bc27)
  - [Fix to use SessionTokenClaims](https://github.com/bouzuya/tsukota-web/commit/68be238fea2b377c1c9d15336f8797508382a33f)
  - [Fix IamSessionVerifier](https://github.com/bouzuya/tsukota-web/commit/3f3850653a0e5604faa91289648f2374b8977d5d)
  - [Fix SessionTokenVerifier::verify signature](https://github.com/bouzuya/tsukota-web/commit/0774f2fb8bd0ac5f980b0a1eedc8fc6bddcf7ccd)
  - [Add SessionTokenClaims](https://github.com/bouzuya/tsukota-web/commit/b43723ae8a68fdd53fe7d6d18d5e7fdfcba3916e)
  - [Add IamSessionTokenVerifier](https://github.com/bouzuya/tsukota-web/commit/35fd11997df9832881e7f55c931d10a7b43f64af)

[bouzuya/tsukota-web]: https://github.com/bouzuya/tsukota-web
