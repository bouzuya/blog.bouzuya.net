今日は [bouzuya/tsukota-web] の FirestoreClient を実装。

何度目かの FirestoreClient の実装。今回は `Document` や `ListDocumentsResponse` などを wrap せずに露出させる方針をとってみた。これらの型をそのまま出すので deserialize も別メソッドにした。 deserialize が別メソッドなので serialize も別メソッドに。

まだきちんと試していないけど、次のようなインタフェースになる想定。

```rust
let client = firestore_client::FirestoreClient::connect(
  firestore_client::path::DatabaseName::from_project_id("project1")?
)?;

client.create_document(
    firestore_client::path::DocumentPath::from_str("col1/doc1")?,
    client.serialize(&value)?
).await?;

let firestore_client::google::firestore::v1::ListDocumentsResponse {
  documents,
  next_page_token
} = client.list_documents(
    firestore_client::path::CollectionPath::from_str("col1")?,
    None, // next_page_token
).await?;
```

これ系の即興での実装は Transaction まわりで面倒になってやめてしまいがち。あまり凝らずにそれを使うコードに注力したい。

明日は [crates:serde-firestore-value] のバージョンアップなどをしておかないとまずそう。

---

今日のコミット。

- [tsukota-web](https://github.com/bouzuya/tsukota-web) 5 commits
  - [Improve FirestoreClient](https://github.com/bouzuya/tsukota-web/commit/17694661397b5e27ca4e1d7db3645c9e04365d64)
  - [Add FirestoreClient::list_documents](https://github.com/bouzuya/tsukota-web/commit/bdcefa5d45b4b1cc82174d8ce0aaecfaec7b3e3e)
  - [Add FirestoreClient::{deserialize,get_document}](https://github.com/bouzuya/tsukota-web/commit/2155f250aebf7f091829d0daabfd6fd1f659244c)
  - [Add FirestoreClient::new](https://github.com/bouzuya/tsukota-web/commit/b48aead9cf3ada18206acade35c262d4553998f1)
  - [Add firestore-client crate](https://github.com/bouzuya/tsukota-web/commit/a2e1f692d709f38b505dc0750b5fa8b0bebb7336)

[bouzuya/tsukota-web]: https://github.com/bouzuya/tsukota-web
[crates:serde-firestore-value]: https://crates.io/crates/serde-firestore-value
