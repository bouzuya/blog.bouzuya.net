[bouzuya/tsukota-web] の application crate をおおむね完了し、 api crate もなんとなく形になってきた。

今回は層間での変換を減らそうと、 Use Case / Application Service の入力・出力に使用する構造体は `serde::Deserialize`, `serde::Serialize` を実装して、 HTTP Request Body / Response Body でも流用しようと考えている。

この考えを伝えて AI エージェントに実装させると、パスパラメーターとリクエストボディに分けて、リクエストボディ部分だけ構造体を定義してきた。「なるほど、そういう解釈になるのか」と思った。パスパラメーターは対象のリソースを、リクエストボディは操作内容を指定するということらしい。自分とは違う考えを持っている感じが面白い。

ぼくとしては Use Case の段階でパスパラメーター (対象) とリクエストボディ (操作内容) での区別はしたくない。結果的に HTTP のエンドポイントとして、更新系の Use Case を `POST /commands/{use_case_name}` の形にしてパスパラメーターをなくすことにした。

参照系はリソースベースのものなので一貫性がないのだけど、更新系は `<form action="...">` や `fetch(...)` のように隠れてしまうので、それらは別で考えても問題はないと判断した。実際に画面をつくりはじめたときに、方針を転換するかもしれない。

明日はインメモリでいいのでバックエンドのサーバーが立ち上がるようにしよう。それが終わったらフロントエンドに着手していこうかな。永続化や認証まわりは先送りする形で。

---

今日のコミット。

- [tsukota-web](https://github.com/bouzuya/tsukota-web) 8 commits
  - [Fix CI settings](https://github.com/bouzuya/tsukota-web/commit/4f5e88c2cbab92934915a17ac8f8089ae4cd4006)
  - [Add CI settings](https://github.com/bouzuya/tsukota-web/commit/986514840d72bd0cb583603515b7492ffc26e756)
  - [Fix user_id fields in application crate](https://github.com/bouzuya/tsukota-web/commit/adf8761a5e8f391acb6086f306095cb1a735b4e0)
  - [Fix api crate dependencies](https://github.com/bouzuya/tsukota-web/commit/6fd296d1701612cfdb2c00bf46414257e99eb521)
  - [Add api crate impl](https://github.com/bouzuya/tsukota-web/commit/415c82b6e112e94b19fa7d29d7a09a8b1455d2c1)
  - [Update SPEC.md](https://github.com/bouzuya/tsukota-web/commit/d01d8aa6c7c023c69758ee80418f6c5cada159d3)
  - [Fix application crate response](https://github.com/bouzuya/tsukota-web/commit/dcdd89b741e3ab8586c638eb882e25a23bcbc6c3)
  - [Update use case interface](https://github.com/bouzuya/tsukota-web/commit/5bccb5666caaef40a017ef78a3b213da5091bd57)

[bouzuya/tsukota-web]: https://github.com/bouzuya/tsukota-web
