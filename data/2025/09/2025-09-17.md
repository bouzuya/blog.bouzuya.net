一昨日 ([2025-09-15]) の続きで、 RBAC: Role Based Access Control っぽいものを実装するときの型なんかを整理していて、 `enum Permission` の variant と `String` の変換の boilerplate code が良くないなと思った。

[crates:strum] を使えばいいんだろうけど、ごちゃごちゃしていて依存も多いのでできれば使いたくない。

代替を調べたら [crates:parse-display] が候補に出てきたので、ドキュメントを見てみたり、 [bouzuya/rust-examples] の parse-display1 を書いてみたりした。ぼくの結論としては悪くないのだけど、 `Error` の型が固定されるのが嫌だと感じた。

で、自作してみた。 `Display` と `FromStr` を実装してくれる derive macro を。

[bouzuya/rust-sandbox] の enum-str-conv に置いている。先日調べた derive macro の実装手順に従って [crates:trybuild] などを使いながら書いた。

たぶん、こういう crate は 100 個はあると思う。思うけど、明日にでもリポジトリを切り分けて crates.io に公開しようかな。どうせほとんどの人は strum 使うわけだし、ゴミみたいな crate が 1 個増えるくらい気にしなくてもいいでしょ。

---

焼肉に行った。下の子が肉が燃えているのを見て「かじだー」と叫ぶので「しーっ」と静かにさせるのを何度か繰り返した。

---

今日のコミット。

- [rust-sandbox](https://github.com/bouzuya/rust-sandbox) 1 commit
  - [Add enum-str-conv](https://github.com/bouzuya/rust-sandbox/commit/436e801038c961117da9020bd66b8f6e4115537c)
- [rust-examples](https://github.com/bouzuya/rust-examples) 1 commit
  - [Add parse-display1](https://github.com/bouzuya/rust-examples/commit/9990ad72561bdcede06e065869e037282f74836a)
- [googleapis-tonic](https://github.com/bouzuya/googleapis-tonic) 1 commit
  - [Regenerate crates using googleapis/google#6288882e44b2659de26e5038950987b3b0aceb57](https://github.com/bouzuya/googleapis-tonic/commit/0f0e671650e60b8a1a7924b9533c51b83085c6b5)

[2025-09-15]: https://blog.bouzuya.net/2025/09/15/
[bouzuya/rust-examples]: https://github.com/bouzuya/rust-examples
[bouzuya/rust-sandbox]: https://github.com/bouzuya/rust-sandbox
[crates:parse-display]: https://crates.io/crates/parse-display
[crates:strum]: https://crates.io/crates/strum
[crates:trybuild]: https://crates.io/crates/trybuild
