[2017-09-10][] につくった blog.bouzuya.net 4.4.0 のことを書く。

blog.bouzuya.net 4.4.0 ではスマホ向けの JavaScript を追加した。

4.3 までは HTML と CSS だけだったが、 4.4 からは JavaScript で動きを増やしていくつもりだ。……つもりだけど、 4.4 では動きがほとんど変わらない。大きな違いが出ないようになっている。

クライアントサイドでのレンダリングができるようになった。 HTML 全体を取得して再描画されていたところが、 JSON で一部を取得して必要分だけ再描画されるようになった。結果として速度が改善されている。切替時の一瞬ではあるが、体感で分かる差がある。

次に、都度の再読込がなくなったことによる変化だ。 CSS transition が効くようになった。具体的には一覧から詳細へと移動する際に、左右に記事が出入りするようになっている。左端の隙間の意味や、一覧・詳細の位置関係をイメージしやすくなっているはずだ。

横(右)から記事の詳細が入ってくる。 3.x では縦(下)からだったが、 4.x では横(右)からになった。上下を「前後の記事への移動」、左右を「一覧・詳細の移動」に統一するためだ。

まず、上下に両方を兼ねさせるとその意味が曖昧になるので、上下・左右で役割を分ける。次に、左右を「前後の記事への移動」にしてしまうと、一覧を横に並べないといけなくなる。横書きの一覧を横に並べないといけなくなる。これでは一覧性が落ちてしまう。一覧を縦に並べる。

ここまで説明すれば、上下が「前後の記事への移動」、左右が「一覧・詳細の移動」が自然だと分かる。全て上下で曖昧にならないように動きをつけられるが、 CSS transition で簡単に、とはいかなさそうなので妥協している。

さて、次は 4.5 。デスクトップ向けの JavaScript だ。細かいところを要求すると大変だし、スマホで見ることが主だと思っているので……そこまでこだわらずに済ませるつもりだ。

-----

Factorio のフリープレイをはじめた。

キャンペーンの輸送ベルトの狂気を、細い道に 6 つのアイテムを通すところまで遊んだのだけど、「これ Factorio でなくてもいいな」と感じた。フリープレイに移行。そこからは夢中で遊んで、ソーラーパネルを大量に設置するところまで進めた。

[2017-09-10]: https://blog.bouzuya.net/2017/09/10/
