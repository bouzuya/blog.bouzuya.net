[Let's Split で使っているキーマップの v15 ](https://gist.github.com/bouzuya/38cf85e55fb3a064e9efc49cfec8a6c4/064e3ee47099b993c763312291b9cebb235481d7) をつくった。

[2018-W07 の目標][2018-02-11]にも「 QMK Firmware の OSL / OSM を調べ・試す」を含めていた。そこでも書いたとおり [2018-01-31][] から使いはじめたキーマップに不満があって、いろいろ試していた ([2018-02-13][] など) 。

その不満はレイヤー切り替え後に Mod キーが残りがちな点と同時押しが多すぎる点だ。

前回の変更は Mod キーをすべて別レイヤーに持っていったことだ。これはアイデアとしては良くて、おかげで Mod キーを左右対称にできた。

以前も書いたがぼくは物理キー数 36 で Let's Split を使っている。この環境では Mod キーを 2 つずつ配置するのは難しい。 `LT()` などで英字キーと兼ねるなど、何かしらの工夫が必要だ。その工夫として別レイヤーに持っていったわけだ。

アイデアとしては良いのだけど……と書いた。現状はあまり良くない。実態としてはいくつかの問題があるからだ。そのひとつは Mod キーが残りがちなことだ。これがひとつめの不満だ。

これはレイヤー切り替えとの相性が悪いのだと思う。感覚的には「レイヤー切り替え→押し下げ→レイヤー戻り→離し (既に別のキーになっているため残る) 」が起きているように思える。改めてレイヤーを切り替えて、押す→離すをすれば解除されるのだけど、面倒すぎる。そうならないようにそれらのキーをカタカタと押す習慣ができつつある。ダメだ。

もうひとつの不満は同時押しが多すぎる点だ。これも前に書いた気がするのだけど、ぼくは同時押しが嫌いだし、良くないものだと思っている。同時押しは入力を難しく遅くするものだと思っている。↑にも書いたとおりレイヤーなどが前提になる Let's Split のようなキーボードを使うべきでないと言われそうな不満ではあるのだけど、いつか同時押しを全廃したいと思っている。

解決策としては同時押しを順押し (?) で済むようにする。順番に押せるようにすればいい。これが意外と難しいし、別の問題も引き起こす。それはまた別で書く。

今回はどちらも中途半端なのだけど、すこしは改善に近づいた。

QMK Firmware の `process_record_user` で強引に処理した。 QMK Firmware 自体に手をいれることも考えたのだけど、調べてみたら大げさになりそうだし、いかにも非標準な感じだったので避けた。

独自に Mod を保持して、それを送るようにしただけだ。無駄にキーを送っている気がするし、一部これでいいのか怪しいところはある。

独自の Mod になってしまったので、本来の Mod キーはキーボードから消えてしまった。ぼくのキーマップは新時代に突入したかもしれない。

[2018-01-31]: https://blog.bouzuya.net/2018/01/31/
[2018-02-11]: https://blog.bouzuya.net/2018/02/11/
[2018-02-13]: https://blog.bouzuya.net/2018/02/13/
